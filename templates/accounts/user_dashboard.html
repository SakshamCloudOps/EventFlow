{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
  <div class="card shadow p-4 rounded">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="text-primary">
        <i class="fas fa-user-circle me-2"></i> My Profile
      </h2>
      <a href="{% url 'edit_profile' %}" class="btn btn-outline-primary btn-sm">
        ✏️ Edit Profile
      </a>
    </div>

    <div class="d-flex flex-column align-items-center mb-4">
      {% if profile.profile_picture %}
        <img src="{{ profile.profile_picture.url }}" alt="Profile Picture"
             class="rounded-circle shadow mb-3" width="130" height="130">
      {% else %}
        <img src="{% static 'default-avatar.png' %}" alt="Profile Picture"
             class="rounded-circle shadow mb-3" width="130" height="130">
      {% endif %}
      <h5 class="fw-semibold mb-0">{{ user.get_full_name }}</h5>
      <p class="text-muted">@{{ user.username }}</p>
    </div>

    <div class="row text-secondary fs-6">
      <div class="col-md-6">
        <p><strong>📞 Phone:</strong> {{ profile.phone|default:"N/A" }}</p>
        <p><strong>🎓 Education:</strong> {{ profile.education|default:"N/A" }}</p>
        <p><strong>📝 Bio:</strong> {{ profile.bio|default:"N/A" }}</p>
        <p><strong>📍 Location:</strong> {{ profile.location|default:"N/A" }}</p>
      </div>
      <div class="col-md-6">
        <p><strong>⚧ Gender:</strong> {{ profile.gender|default:"N/A" }}</p>
        <p><strong>🎂 Birth Date:</strong> {{ profile.birth_date|date:"F d, Y"|default:"N/A" }}</p>
        <p><strong>🔗 LinkedIn:</strong>
          {% if profile.linkedin %}
            <a href="{{ profile.linkedin }}" target="_blank">{{ profile.linkedin }}</a>
          {% else %}
            N/A
          {% endif %}
        </p>
        <p><strong>💻 GitHub:</strong>
          {% if profile.github %}
            <a href="{{ profile.github }}" target="_blank">{{ profile.github }}</a>
          {% else %}
            N/A
          {% endif %}
        </p>
        <p><strong>📸 Instagram:</strong>
          {% if profile.instagram %}
            <a href="{{ profile.instagram }}" target="_blank">{{ profile.instagram }}</a>
          {% else %}
            N/A
          {% endif %}
        </p>
      </div>
    </div>

    <hr class="mt-4">
    <h5 class="text-secondary mb-2">📅 Your Registered Events</h5>
    <ul class="list-group mt-2">
      {% for event in registered_events %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <a href="{% url 'event_detail' event.id %}" class="text-decoration-none">{{ event.title }}</a>
          <span class="badge bg-secondary rounded-pill">{{ event.date|date:"M d, Y" }}</span>
        </li>
      {% empty %}
        <li class="list-group-item text-muted">You haven't registered for any events yet.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
